
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Persiapan Coding NodeJS - Living life and make it better</title>
  <meta name="author" content="Endy Muhardin">

  
  <meta name="description" content="Menyambung dari pengantar di artikel sebelumnya, kali ini kita akan mempersiapkan development environment untuk membuat aplikasi dengan NodeJS dan &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://software.endy.muhardin.com/javascript/persiapan-coding-nodejs/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Living life and make it better" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>

<meta property="fb:app_id" content="269506799827290" />



  <link href="/stylesheets/data-table.css" media="screen, projection" rel="stylesheet" type="text/css" />
  <link href="/stylesheets/font-awesome.css" media="screen, projection" rel="stylesheet" type="text/css" />

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-36102948-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:software.endy.muhardin.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
    <li><a href="/">
        <span class="my_site_title">
            Living life and make it better
        </span>
       
           <span class="my_site_subtitle">
             life, learn, contribute
           </span>
       
    </a></li>
  <li><a href="/">Blog</a></li>
  <li><a href="/archives">Archives</a></li>
  <li><a href="/calendar">Calendar</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Persiapan Coding NodeJS</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-21T15:43:00+07:00" pubdate data-updated="true">Feb 21<span>st</span>, 2014</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Menyambung dari pengantar di <a href="http://software.endy.muhardin.com/life/ongoing-learning/">artikel sebelumnya</a>, kali ini kita akan mempersiapkan development environment untuk membuat aplikasi dengan NodeJS dan Redis. Kita juga akan mendeploy aplikasi kita di Heroku agar bisa diakses masyarakat umum.</p>

<!--more-->


<h2>Instalasi</h2>

<h3>Node JS</h3>

<p>NodeJS adalah yang pertama kita install karena dia memiliki Node Package Manager (NPM) yang nantinya akan digunakan oleh framework/library lainnya.</p>

<p>Cara instalasi termudah di Ubuntu adalah dengan menambahkan <a href="https://launchpad.net/~chris-lea/+archive/node.js">PPA (Personal Package Archive) NodeJS milik Chris Lea</a>. Jalankan perintah berikut di command line</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo add-apt-repository ppa:chris-lea/node.js
</span><span class='line'>sudo apt-get update
</span><span class='line'>sudo apt-get install nodejs</span></code></pre></td></tr></table></div></figure>


<h3>Heroku</h3>

<p><a href="http://www.heroku.com/">Heroku</a> adalah penyedia layanan cloud untuk menjalankan aplikasi. Generasi jadul seperti saya menyebutnya perusahaan hosting ;) Heroku menyediakan hosting gratis untuk aplikasi kecil yang bisa kita gunakan untuk bermain-main dengan teknologinya. Silahkan <a href="https://id.heroku.com/signup/devcenter">daftar dulu</a>, kemudian <a href="https://toolbelt.heroku.com/">unduh aplikasi clientnya</a>.</p>

<p>Setelah terinstal, kita harus melakukan login menggunakan aplikasi client agar bisa membuat dan mendeploy aplikasi. Kita juga akan diminta untuk mengatur SSH key yang akan digunakan untuk otentikasi dengan Heroku. Bila Anda belum paham apa itu SSH key dan bagaimana cara membuatnya, silahkan baca dulu <a href="http://software.endy.muhardin.com/linux/login-ssh-dengan-private-key/">artikel ini</a>.</p>

<h3>Redis</h3>

<p>Sama seperti instalasi NodeJS, untuk menginstal Redis kita perlu menambahkan PPA dulu. Berikut perintahnya.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo add-apt-repository ppa:rwky/redis
</span><span class='line'>sudo apt-get update
</span><span class='line'>sudo apt-get install redis-server</span></code></pre></td></tr></table></div></figure>


<h3>Library Lain</h3>

<p>Nantinya kita akan menggunakan library lain seperti misalnya:</p>

<ul>
<li>ExpressJS</li>
<li>Yeoman</li>
<li>dsb</li>
</ul>


<p>Tapi untuk sementara ini kita belum membutuhkannya. Jadi petunjuk instalasinya akan kita bahas nanti pada waktu diperlukan.</p>

<h2>Hello World</h2>

<p>Mengikuti tradisi yang telah diwariskan turun temurun oleh leluhur kita, langkah pertama dalam mempelajari suatu bahasa pemrograman adalah menampilkan tulisan <code>Hello World</code>.</p>

<h3>Clone Repository</h3>

<p>Kita clone dulu repository yang telah kita buat di artikel sebelumnya.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git clone git@github.com:endymuhardin/aplikasi-membership.git</span></code></pre></td></tr></table></div></figure>


<h3>Inisialisasi Aplikasi NodeJS</h3>

<p>Setelah itu, masuk ke foldernya dan lakukan inisialisasi project NodeJS dengan perintah <code>npm init</code>. Perintah ini akan menghasilkan file <code>package.json</code> yang merupakan deskripsi mengenai aplikasi yang akan kita buat. Bagi yang mempunyai latar belakang Maven, <code>package.json</code> ini kira-kira mirip dengan <code>pom.xml</code>.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd aplikasi-membership
</span><span class='line'>npm init</span></code></pre></td></tr></table></div></figure>


<p>Berikut output dari perintah <code>npm init</code>. Kita akan ditanya-tanyai mengenai informasi aplikasi yang kita buat.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>This utility will walk you through creating a package.json file.
</span><span class='line'>It only covers the most common items, and tries to guess sane defaults.
</span><span class='line'>
</span><span class='line'>See `npm help json` for definitive documentation on these fields
</span><span class='line'>and exactly what they do.
</span><span class='line'>
</span><span class='line'>Use `npm install &lt;pkg&gt; --save` afterwards to install a package and
</span><span class='line'>save it as a dependency in the package.json file.
</span><span class='line'>
</span><span class='line'>Press ^C at any time to quit.
</span><span class='line'>name: (aplikasi-membership) 
</span><span class='line'>version: (0.0.0) 
</span><span class='line'>description: Aplikasi Membership
</span><span class='line'>entry point: (index.js) 
</span><span class='line'>test command: 
</span><span class='line'>git repository: (git://github.com/endymuhardin/aplikasi-membership.git) 
</span><span class='line'>keywords: 
</span><span class='line'>author: Endy Muhardin
</span><span class='line'>license: (ISC) GPL-3.0
</span><span class='line'>About to write to /home/endy/workspace/git-clones/aplikasi-membership/package.json:
</span><span class='line'>
</span><span class='line'>{
</span><span class='line'>  "name": "aplikasi-membership",
</span><span class='line'>  "version": "0.0.0",
</span><span class='line'>  "description": "Aplikasi Membership",
</span><span class='line'>  "main": "index.js",
</span><span class='line'>  "scripts": {
</span><span class='line'>    "test": "echo \"Error: no test specified\" && exit 1"
</span><span class='line'>  },
</span><span class='line'>  "repository": {
</span><span class='line'>    "type": "git",
</span><span class='line'>    "url": "git://github.com/endymuhardin/aplikasi-membership.git"
</span><span class='line'>  },
</span><span class='line'>  "author": "Endy Muhardin",
</span><span class='line'>  "license": "GPL-3.0",
</span><span class='line'>  "bugs": {
</span><span class='line'>    "url": "https://github.com/endymuhardin/aplikasi-membership/issues"
</span><span class='line'>  },
</span><span class='line'>  "homepage": "https://github.com/endymuhardin/aplikasi-membership"
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>Is this ok? (yes) yes</span></code></pre></td></tr></table></div></figure>


<p>Selanjutnya, kita akan memiliki file <a href="https://github.com/endymuhardin/aplikasi-membership/blob/master/package.json"><code>package.json</code></a> dalam folder aplikasi kita.</p>

<h3>Menjalankan Aplikasi</h3>

<p>Dalam file <code>package.json</code> dinyatakan bahwa aplikasi kita bisa dijalankan dengan mengeksekusi file <code>index.js</code>. Mari kita buat file tersebut</p>

<figure class='code'><figcaption><span>index.js</span><a href='https://github.com/endymuhardin/aplikasi-membership/blob/master/index.js'>Lihat di Github </a></figcaption> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">port</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">PORT</span> <span class="o">||</span> <span class="mi">5000</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">){</span>
</span><span class='line'>    <span class="nx">response</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;Content-Type&quot;</span><span class="o">:</span> <span class="s2">&quot;text/plain&quot;</span><span class="p">});</span>
</span><span class='line'>    <span class="nx">response</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s2">&quot;Hello World&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">response</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</span><span class='line'><span class="p">}).</span><span class="nx">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;App ready at port &quot;</span><span class="o">+</span><span class="nx">port</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>File <code>index.js</code> bisa kita jalankan dari command line</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>node index.js</span></code></pre></td></tr></table></div></figure>


<p>Kita bisa lihat aplikasinya di browser dengan mengakses <code>http://localhost:5000</code>.</p>

<p><img src="https://lh3.googleusercontent.com/-zh_cAl6EUkk/UwXFnVvVpiI/AAAAAAAAFMY/NH8Z8kdekhY/w704-h465-no/01-hello-nodejs.png"></p>

<h2>Deployment ke Heroku</h2>

<p>Untuk bisa dideploy ke Heroku, kita harus membuat file konfigurasi yang bernama <code>Procfile</code>. Berikut isinya</p>

<figure class='code'><figcaption><span>Procfile</span><a href='https://github.com/endymuhardin/aplikasi-membership/blob/master/Procfile'>Lihat di Github </a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>web: node index.js</span></code></pre></td></tr></table></div></figure>


<p>Artinya:</p>

<ul>
<li>Aplikasi kita adalah aplikasi web</li>
<li>jenis aplikasi webnya adalah NodeJS. Jenis aplikasi ini bisa bermacam-macam, misalnya Java, Python, dsb</li>
<li>File yang harus dijalankan NodeJS adalah <code>index.js</code></li>
</ul>


<p>Kita bisa tes konfigurasi tersebut dengan menggunakan aplikasi client Heroku yang bernama <code>foreman</code>. Jalankan perintah berikut di command line.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>foreman start</span></code></pre></td></tr></table></div></figure>


<p>Berikut outputnya</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>14:41:18 web.1  | started with pid 17022
</span><span class='line'>14:41:18 web.1  | App ready at port 5000</span></code></pre></td></tr></table></div></figure>


<p>Sama seperti perintah <code>node index.js</code>, hasilnya bisa kita lihat menggunakan browser dengan mengakses <code>http://localhost:5000</code>.
Untuk mematikannya, tekan <code>Ctrl-C</code></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>^CSIGINT received
</span><span class='line'>14:41:46 system | sending SIGTERM to all processes
</span><span class='line'>14:41:46 web.1  | terminated by SIGTERM</span></code></pre></td></tr></table></div></figure>


<p>Selanjutnya, kita inisialisasi aplikasi kita di Heroku.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>heroku apps:create ysq</span></code></pre></td></tr></table></div></figure>


<p>Perintah ini akan membuat aplikasi bernama <code>ysq</code> di server Heroku. Dia juga akan menambahkan remote-url git agar kita bisa melakukan deployment. Berikut output dari perintah di atas</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Creating ysq... done, stack is cedar
</span><span class='line'>http://ysq.herokuapp.com/ | git@heroku.com:ysq.git
</span><span class='line'>Git remote heroku added</span></code></pre></td></tr></table></div></figure>


<p>Untuk mendeploy ke Heroku, cukup dengan melakukan <code>git push</code>.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git push heroku master</span></code></pre></td></tr></table></div></figure>


<p>Berikut outputnya</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Initializing repository, done.
</span><span class='line'>Counting objects: 16, done.
</span><span class='line'>Delta compression using up to 4 threads.
</span><span class='line'>Compressing objects: 100% (15/15), done.
</span><span class='line'>Writing objects: 100% (16/16), 2.10 KiB | 0 bytes/s, done.
</span><span class='line'>Total 16 (delta 3), reused 4 (delta 0)
</span><span class='line'>
</span><span class='line'>-----&gt; Node.js app detected
</span><span class='line'>
</span><span class='line'>       PRO TIP: Specify a node version in package.json
</span><span class='line'>       See https://devcenter.heroku.com/articles/nodejs-support
</span><span class='line'>
</span><span class='line'>-----&gt; Defaulting to latest stable node: 0.10.26
</span><span class='line'>-----&gt; Downloading and installing node
</span><span class='line'>-----&gt; Installing dependencies
</span><span class='line'>-----&gt; Cleaning up node-gyp and npm artifacts
</span><span class='line'>-----&gt; Building runtime environment
</span><span class='line'>-----&gt; Discovering process types
</span><span class='line'>       Procfile declares types -&gt; web
</span><span class='line'>
</span><span class='line'>-----&gt; Compressing... done, 5.1MB
</span><span class='line'>-----&gt; Launching... done, v3
</span><span class='line'>       http://ysq.herokuapp.com deployed to Heroku
</span><span class='line'>
</span><span class='line'>To git@heroku.com:ysq.git
</span><span class='line'> * [new branch]      master -&gt; master</span></code></pre></td></tr></table></div></figure>


<p>Kita bisa browse aplikasi tersebut di alamat <code>http://ysq.herokuapp.com</code> seperti ini</p>

<p><img src="https://lh5.googleusercontent.com/-dTD4Lcoj2jY/UwXFnlTeAVI/AAAAAAAAFMc/qUlNM_zCBvc/w704-h465-no/02-heroku-deployment.png"></p>

<h2>Vertical Slice</h2>

<p>Vertical Slice adalah potongan aplikasi yang sudah tersambung end-to-end. Maksudnya adalah sebagian kecil aplikasi mulai dari tampilan yang dilihat user hingga ke penyimpanan data di database sudah tersambung dengan baik. Saya biasanya membuat vertical slice untuk menguji apakah kombinasi framework/library yang digunakan sudah terintegrasi dengan benar. Untuk itu, kita akan membuat kode program sederhana untuk menyimpan dan mengambil data dari NodeJS ke Redis. Kita juga akan tes apakah integrasi tersebut juga berjalan lancar di Heroku.</p>

<h3>Verifikasi Instalasi Redis</h3>

<p>Setelah sukses dengan <code>Hello World</code> tampilan, kita juga harus membuat <code>Hello World</code> untuk akses ke database Redis. Sebelum mulai, kita tes dulu instalasi Redis kita apakah dia sudah berjalan lancar dengan menggunakan perintah <code>redis-cli ping</code>. Kalau instalasinya benar, dia akan menjawab</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>PONG</span></code></pre></td></tr></table></div></figure>


<p>Selanjutnya, kita masuk ke command line redis, menyimpan variabel bernama email, kemudian menampilkan isi variabel tersebut.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ redis-cli
</span><span class='line'>127.0.0.1:6379&gt; set email endy.muhardin@gmail.com
</span><span class='line'>OK
</span><span class='line'>127.0.0.1:6379&gt; get email
</span><span class='line'>"endy.muhardin@gmail.com"</span></code></pre></td></tr></table></div></figure>


<h3>Simpan data di Redis dari NodeJS</h3>

<p>Kita akan memodifikasi <code>index.js</code> agar menyimpan dan mengambil data dari Redis. Berikut source codenya</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">redis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;redis&quot;</span><span class="p">).</span><span class="nx">createClient</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">displayContent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="nx">redis</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;nama&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">reply</span><span class="p">){</span>
</span><span class='line'>        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Nama : &quot;</span><span class="o">+</span><span class="nx">reply</span><span class="p">);</span>
</span><span class='line'>        <span class="nx">redis</span><span class="p">.</span><span class="nx">expire</span><span class="p">(</span><span class="s2">&quot;nama&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">redis</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;email&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">reply</span><span class="p">){</span>
</span><span class='line'>        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Email : &quot;</span><span class="o">+</span><span class="nx">reply</span><span class="p">);</span>
</span><span class='line'>        <span class="nx">redis</span><span class="p">.</span><span class="nx">expire</span><span class="p">(</span><span class="s2">&quot;email&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="nx">redis</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;connect&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="nx">redis</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;nama&quot;</span><span class="p">,</span> <span class="s2">&quot;Endy Muhardin&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">redis</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;email&quot;</span><span class="p">,</span> <span class="s2">&quot;endy.muhardin@gmail.com&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">displayContent</span><span class="p">();</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>Kalau langsung kita jalankan, maka kita akan mendapat error berikut</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nb">Error</span><span class="o">:</span> <span class="nx">Cannot</span> <span class="nx">find</span> <span class="nx">module</span> <span class="s1">&#39;redis&#39;</span>
</span><span class='line'>    <span class="nx">at</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">Module</span><span class="p">.</span><span class="nx">_resolveFilename</span> <span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">js</span><span class="o">:</span><span class="mi">338</span><span class="o">:</span><span class="mi">15</span><span class="p">)</span>
</span><span class='line'>    <span class="nx">at</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">Module</span><span class="p">.</span><span class="nx">_load</span> <span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">js</span><span class="o">:</span><span class="mi">280</span><span class="o">:</span><span class="mi">25</span><span class="p">)</span>
</span><span class='line'>    <span class="nx">at</span> <span class="nx">Module</span><span class="p">.</span><span class="nx">require</span> <span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">js</span><span class="o">:</span><span class="mi">364</span><span class="o">:</span><span class="mi">17</span><span class="p">)</span>
</span><span class='line'>    <span class="nx">at</span> <span class="nx">require</span> <span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">js</span><span class="o">:</span><span class="mi">380</span><span class="o">:</span><span class="mi">17</span><span class="p">)</span>
</span><span class='line'>    <span class="nx">at</span> <span class="nb">Object</span><span class="p">.</span><span class="o">&lt;</span><span class="nx">anonymous</span><span class="o">&gt;</span> <span class="p">(</span><span class="err">/home/endy/workspace/git-clones/aplikasi-membership/index.js:13:13)</span>
</span><span class='line'>    <span class="nx">at</span> <span class="nx">Module</span><span class="p">.</span><span class="nx">_compile</span> <span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">js</span><span class="o">:</span><span class="mi">456</span><span class="o">:</span><span class="mi">26</span><span class="p">)</span>
</span><span class='line'>    <span class="nx">at</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">Module</span><span class="p">.</span><span class="nx">_extensions</span><span class="p">..</span><span class="nx">js</span> <span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">js</span><span class="o">:</span><span class="mi">474</span><span class="o">:</span><span class="mi">10</span><span class="p">)</span>
</span><span class='line'>    <span class="nx">at</span> <span class="nx">Module</span><span class="p">.</span><span class="nx">load</span> <span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">js</span><span class="o">:</span><span class="mi">356</span><span class="o">:</span><span class="mi">32</span><span class="p">)</span>
</span><span class='line'>    <span class="nx">at</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">Module</span><span class="p">.</span><span class="nx">_load</span> <span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">js</span><span class="o">:</span><span class="mi">312</span><span class="o">:</span><span class="mi">12</span><span class="p">)</span>
</span><span class='line'>    <span class="nx">at</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">Module</span><span class="p">.</span><span class="nx">runMain</span> <span class="p">(</span><span class="nx">module</span><span class="p">.</span><span class="nx">js</span><span class="o">:</span><span class="mi">497</span><span class="o">:</span><span class="mi">10</span><span class="p">)</span>
</span><span class='line'><span class="nx">exited</span> <span class="kd">with</span> <span class="nx">code</span> <span class="mi">8</span>
</span><span class='line'><span class="mi">16</span><span class="o">:</span><span class="mi">33</span><span class="o">:</span><span class="mi">26</span> <span class="nx">system</span> <span class="o">|</span> <span class="nx">sending</span> <span class="nx">SIGTERM</span> <span class="nx">to</span> <span class="nx">all</span> <span class="nx">processes</span>
</span></code></pre></td></tr></table></div></figure>


<p>Untuk mengatasi error tersebut, kita membutuhkan library <a href="https://github.com/mranney/node_redis">node_redis</a> untuk menghubungkan NodeJS dengan Redis. Install dulu menggunakan NPM dengan cara menjalankan perintah berikut dalam folder aplikasi.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">npm</span> <span class="nx">install</span> <span class="nx">redis</span> <span class="o">--</span><span class="nx">save</span>
</span></code></pre></td></tr></table></div></figure>


<p>Kita gunakan opsi <code>--save</code> agar instalasi tersebut terdaftar di <code>package.json</code>.</p>

<p>Di website asalnya ada petunjuk mengenai penggunaan <code>hiredis</code>, yaitu binding terhadap library C untuk meningkatkan performance. Karena belum paham apa manfaat dan konsekuensinya, dan juga supaya tutorialnya lebih sederhana, kita tidak akan gunakan <code>hiredis</code>.</p>

<p>Berikut output dari perintah di atas</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">npm</span> <span class="nx">http</span> <span class="nx">GET</span> <span class="nx">https</span><span class="o">:</span><span class="c1">//registry.npmjs.org/redis</span>
</span><span class='line'><span class="nx">npm</span> <span class="nx">http</span> <span class="mi">200</span> <span class="nx">https</span><span class="o">:</span><span class="c1">//registry.npmjs.org/redis</span>
</span><span class='line'><span class="nx">npm</span> <span class="nx">http</span> <span class="nx">GET</span> <span class="nx">https</span><span class="o">:</span><span class="c1">//registry.npmjs.org/redis/-/redis-0.10.1.tgz</span>
</span><span class='line'><span class="nx">npm</span> <span class="nx">http</span> <span class="mi">200</span> <span class="nx">https</span><span class="o">:</span><span class="c1">//registry.npmjs.org/redis/-/redis-0.10.1.tgz</span>
</span><span class='line'><span class="nx">redis</span><span class="err">@</span><span class="mf">0.10</span><span class="p">.</span><span class="mi">1</span> <span class="nx">node_modules</span><span class="o">/</span><span class="nx">redis</span>
</span></code></pre></td></tr></table></div></figure>


<p>Setelah itu, kita bisa tes menggunakan <code>foreman</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">foreman</span> <span class="nx">start</span>
</span><span class='line'><span class="mi">16</span><span class="o">:</span><span class="mi">48</span><span class="o">:</span><span class="mi">37</span> <span class="nx">web</span><span class="p">.</span><span class="mi">1</span>  <span class="o">|</span> <span class="nx">started</span> <span class="kd">with</span> <span class="nx">pid</span> <span class="mi">19028</span>
</span><span class='line'><span class="mi">16</span><span class="o">:</span><span class="mi">48</span><span class="o">:</span><span class="mi">37</span> <span class="nx">web</span><span class="p">.</span><span class="mi">1</span>  <span class="o">|</span> <span class="nx">App</span> <span class="nx">ready</span> <span class="nx">at</span> <span class="nx">port</span> <span class="mi">5000</span>
</span><span class='line'><span class="mi">16</span><span class="o">:</span><span class="mi">48</span><span class="o">:</span><span class="mi">37</span> <span class="nx">web</span><span class="p">.</span><span class="mi">1</span>  <span class="o">|</span> <span class="nx">Nama</span> <span class="o">:</span> <span class="nx">Endy</span> <span class="nx">Muhardin</span>
</span><span class='line'><span class="mi">16</span><span class="o">:</span><span class="mi">48</span><span class="o">:</span><span class="mi">37</span> <span class="nx">web</span><span class="p">.</span><span class="mi">1</span>  <span class="o">|</span> <span class="nx">Email</span> <span class="o">:</span> <span class="nx">endy</span><span class="p">.</span><span class="nx">muhardin</span><span class="err">@</span><span class="nx">gmail</span><span class="p">.</span><span class="nx">com</span>
</span><span class='line'><span class="o">^</span><span class="nx">CSIGINT</span> <span class="nx">received</span>
</span><span class='line'><span class="mi">16</span><span class="o">:</span><span class="mi">48</span><span class="o">:</span><span class="mi">39</span> <span class="nx">system</span> <span class="o">|</span> <span class="nx">sending</span> <span class="nx">SIGTERM</span> <span class="nx">to</span> <span class="nx">all</span> <span class="nx">processes</span>
</span><span class='line'><span class="mi">16</span><span class="o">:</span><span class="mi">48</span><span class="o">:</span><span class="mi">39</span> <span class="nx">web</span><span class="p">.</span><span class="mi">1</span>  <span class="o">|</span> <span class="nx">terminated</span> <span class="nx">by</span> <span class="nx">SIGTERM</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Menggunakan Redis di Heroku</h3>

<p>Agar bisa digunakan di Heroku, kita harus menginstal dependensi tambahan, yaitu <code>redis-url</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">npm</span> <span class="nx">install</span> <span class="nx">redis</span><span class="o">-</span><span class="nx">url</span> <span class="o">--</span><span class="nx">save</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ada sedikit perubahan pada metode koneksi database Redis agar menggunakan database yang ada di Heroku.</p>

<p>Edit baris ini</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">redis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;redis&quot;</span><span class="p">).</span><span class="nx">createClient</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<p>menjadi seperti ini</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">REDISTOGO_URL</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">rtg</span>   <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">).</span><span class="nx">parse</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">REDISTOGO_URL</span><span class="p">);</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">redis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;redis&quot;</span><span class="p">).</span><span class="nx">createClient</span><span class="p">(</span><span class="nx">rtg</span><span class="p">.</span><span class="nx">port</span><span class="p">,</span> <span class="nx">rtg</span><span class="p">.</span><span class="nx">hostname</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">redis</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">auth</span><span class="p">(</span><span class="nx">rtg</span><span class="p">.</span><span class="nx">auth</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]);</span>
</span><span class='line'><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">redis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;redis&quot;</span><span class="p">).</span><span class="nx">createClient</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Di sisi heroku, kita harus terlebih dulu menginstal database Redis. Kita bisa gunakan add-ons <code>Redis To Go</code> yang gratisan.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">heroku</span> <span class="nx">addons</span><span class="o">:</span><span class="nx">add</span> <span class="nx">redistogo</span>
</span></code></pre></td></tr></table></div></figure>


<p>Setelah itu kita bisa commit dan push</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">$</span> <span class="nx">git</span> <span class="nx">push</span> <span class="nx">heroku</span> <span class="nx">master</span>
</span><span class='line'><span class="nx">Fetching</span> <span class="nx">repository</span><span class="p">,</span> <span class="nx">done</span><span class="p">.</span>
</span><span class='line'><span class="nx">Counting</span> <span class="nx">objects</span><span class="o">:</span> <span class="mi">7</span><span class="p">,</span> <span class="nx">done</span><span class="p">.</span>
</span><span class='line'><span class="nx">Delta</span> <span class="nx">compression</span> <span class="nx">using</span> <span class="nx">up</span> <span class="nx">to</span> <span class="mi">4</span> <span class="nx">threads</span><span class="p">.</span>
</span><span class='line'><span class="nx">Compressing</span> <span class="nx">objects</span><span class="o">:</span> <span class="mi">100</span><span class="o">%</span> <span class="p">(</span><span class="mi">4</span><span class="o">/</span><span class="mi">4</span><span class="p">),</span> <span class="nx">done</span><span class="p">.</span>
</span><span class='line'><span class="nx">Writing</span> <span class="nx">objects</span><span class="o">:</span> <span class="mi">100</span><span class="o">%</span> <span class="p">(</span><span class="mi">4</span><span class="o">/</span><span class="mi">4</span><span class="p">),</span> <span class="mi">590</span> <span class="nx">bytes</span> <span class="o">|</span> <span class="mi">0</span> <span class="nx">bytes</span><span class="o">/</span><span class="nx">s</span><span class="p">,</span> <span class="nx">done</span><span class="p">.</span>
</span><span class='line'><span class="nx">Total</span> <span class="mi">4</span> <span class="p">(</span><span class="nx">delta</span> <span class="mi">3</span><span class="p">),</span> <span class="nx">reused</span> <span class="mi">0</span> <span class="p">(</span><span class="nx">delta</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="o">-----&gt;</span> <span class="nx">Node</span><span class="p">.</span><span class="nx">js</span> <span class="nx">app</span> <span class="nx">detected</span>
</span><span class='line'>
</span><span class='line'>       <span class="nx">PRO</span> <span class="nx">TIP</span><span class="o">:</span> <span class="nx">Specify</span> <span class="nx">a</span> <span class="nx">node</span> <span class="nx">version</span> <span class="k">in</span> <span class="kr">package</span><span class="p">.</span><span class="nx">json</span>
</span><span class='line'>       <span class="nx">See</span> <span class="nx">https</span><span class="o">:</span><span class="c1">//devcenter.heroku.com/articles/nodejs-support</span>
</span><span class='line'>
</span><span class='line'><span class="o">-----&gt;</span> <span class="nx">Defaulting</span> <span class="nx">to</span> <span class="nx">latest</span> <span class="nx">stable</span> <span class="nx">node</span><span class="o">:</span> <span class="mf">0.10</span><span class="p">.</span><span class="mi">26</span>
</span><span class='line'><span class="o">-----&gt;</span> <span class="nx">Downloading</span> <span class="nx">and</span> <span class="nx">installing</span> <span class="nx">node</span>
</span><span class='line'><span class="o">-----&gt;</span> <span class="nx">Restoring</span> <span class="nx">node_modules</span> <span class="nx">directory</span> <span class="nx">from</span> <span class="nx">cache</span>
</span><span class='line'><span class="o">-----&gt;</span> <span class="nx">Pruning</span> <span class="nx">cached</span> <span class="nx">dependencies</span> <span class="nx">not</span> <span class="nx">specified</span> <span class="k">in</span> <span class="kr">package</span><span class="p">.</span><span class="nx">json</span>
</span><span class='line'><span class="o">-----&gt;</span> <span class="nx">Installing</span> <span class="nx">dependencies</span>
</span><span class='line'>       <span class="nx">npm</span> <span class="nx">WARN</span> <span class="kr">package</span><span class="p">.</span><span class="nx">json</span> <span class="nx">redis</span><span class="o">-</span><span class="nx">url</span><span class="err">@</span><span class="mf">0.2</span><span class="p">.</span><span class="mi">0</span> <span class="nx">No</span> <span class="nx">repository</span> <span class="nx">field</span><span class="p">.</span>
</span><span class='line'>       <span class="nx">npm</span> <span class="nx">http</span> <span class="nx">GET</span> <span class="nx">https</span><span class="o">:</span><span class="c1">//registry.npmjs.org/redis</span>
</span><span class='line'>       <span class="nx">npm</span> <span class="nx">http</span> <span class="mi">200</span> <span class="nx">https</span><span class="o">:</span><span class="c1">//registry.npmjs.org/redis</span>
</span><span class='line'>       <span class="nx">npm</span> <span class="nx">http</span> <span class="nx">GET</span> <span class="nx">https</span><span class="o">:</span><span class="c1">//registry.npmjs.org/redis/-/redis-0.10.1.tgz</span>
</span><span class='line'>       <span class="nx">npm</span> <span class="nx">http</span> <span class="mi">200</span> <span class="nx">https</span><span class="o">:</span><span class="c1">//registry.npmjs.org/redis/-/redis-0.10.1.tgz</span>
</span><span class='line'>       <span class="nx">redis</span><span class="err">@</span><span class="mf">0.10</span><span class="p">.</span><span class="mi">1</span> <span class="nx">node_modules</span><span class="o">/</span><span class="nx">redis</span>
</span><span class='line'><span class="o">-----&gt;</span> <span class="nx">Caching</span> <span class="nx">node_modules</span> <span class="nx">directory</span> <span class="k">for</span> <span class="nx">future</span> <span class="nx">builds</span>
</span><span class='line'><span class="o">-----&gt;</span> <span class="nx">Cleaning</span> <span class="nx">up</span> <span class="nx">node</span><span class="o">-</span><span class="nx">gyp</span> <span class="nx">and</span> <span class="nx">npm</span> <span class="nx">artifacts</span>
</span><span class='line'><span class="o">-----&gt;</span> <span class="nx">Building</span> <span class="nx">runtime</span> <span class="nx">environment</span>
</span><span class='line'><span class="o">-----&gt;</span> <span class="nx">Discovering</span> <span class="nx">process</span> <span class="nx">types</span>
</span><span class='line'>       <span class="nx">Procfile</span> <span class="nx">declares</span> <span class="nx">types</span> <span class="o">-&gt;</span> <span class="nx">web</span>
</span><span class='line'>
</span><span class='line'><span class="o">-----&gt;</span> <span class="nx">Compressing</span><span class="p">...</span> <span class="nx">done</span><span class="p">,</span> <span class="mf">5.3</span><span class="nx">MB</span>
</span><span class='line'><span class="o">-----&gt;</span> <span class="nx">Launching</span><span class="p">...</span> <span class="nx">done</span><span class="p">,</span> <span class="nx">v5</span>
</span><span class='line'>       <span class="nx">http</span><span class="o">:</span><span class="c1">//ysq.herokuapp.com deployed to Heroku</span>
</span><span class='line'>
</span><span class='line'><span class="nx">To</span> <span class="nx">git</span><span class="err">@</span><span class="nx">heroku</span><span class="p">.</span><span class="nx">com</span><span class="o">:</span><span class="nx">ysq</span><span class="p">.</span><span class="nx">git</span>
</span><span class='line'>   <span class="mi">84</span><span class="nx">e7abd</span><span class="p">..</span><span class="nx">cecc87f</span>  <span class="nx">master</span> <span class="o">-&gt;</span> <span class="nx">master</span>
</span></code></pre></td></tr></table></div></figure>


<p>Kita bisa cek apakah aplikasinya sukses dideploy dengan browse ke Heroku. Bila ada error, kita bisa lihat errornya dengan menggunakan perintah <code>heroku logs</code></p>

<h3>Financial Problem</h3>

<p>Setelah saya coba, ternyata untuk bisa menambahkan add-ons RedisToGo di Heroku kita harus memasukkan informasi kartu kredit. Padahal saya cuma mau pakai paket Free.</p>

<p>Untung ada jalan keluarnya. Kita bisa daftar langsung di <a href="https://redistogo.com">website RedisToGo</a> dan memilih paket Free. Setelah itu kita akan mendapatkan satu database seperti bisa dilihat pada screenshot berikut:</p>

<p><img src="https://lh6.googleusercontent.com/-lq4p7uGi63Y/UwYMOsT-95I/AAAAAAAAFNA/TpqPA7qA1Qk/w826-h330-no/03-redistogo.png"></p>

<p>Kita sebaiknya memodifikasi kode program kita agar selalu menggunakan database RedisToGo tersebut walaupun pada saat menjalankan aplikasi di lokal. Ini untuk menyederhanakan kode program kita. Namanya juga aplikasi belajaran, jadi diusahakan sesederhana mungkin.</p>

<p>Kode program yang tadinya seperti ini</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="k">if</span> <span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">REDISTOGO_URL</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">rtg</span>   <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">).</span><span class="nx">parse</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">REDISTOGO_URL</span><span class="p">);</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">redis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;redis&quot;</span><span class="p">).</span><span class="nx">createClient</span><span class="p">(</span><span class="nx">rtg</span><span class="p">.</span><span class="nx">port</span><span class="p">,</span> <span class="nx">rtg</span><span class="p">.</span><span class="nx">hostname</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">redis</span><span class="p">.</span><span class="nx">client</span><span class="p">.</span><span class="nx">auth</span><span class="p">(</span><span class="nx">rtg</span><span class="p">.</span><span class="nx">auth</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]);</span>
</span><span class='line'><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">redis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;redis&quot;</span><span class="p">).</span><span class="nx">createClient</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Kita ubah menjadi seperti ini</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">REDISTOGO_URL</span> <span class="o">=</span> <span class="s2">&quot;redis://redistogo:8adc4536655ce179e2645ae4abd70eb2@pearlfish.redistogo.com:9930/&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">rtg</span>   <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">).</span><span class="nx">parse</span><span class="p">(</span><span class="nx">REDISTOGO_URL</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">redis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;redis&quot;</span><span class="p">).</span><span class="nx">createClient</span><span class="p">(</span><span class="nx">rtg</span><span class="p">.</span><span class="nx">port</span><span class="p">,</span> <span class="nx">rtg</span><span class="p">.</span><span class="nx">hostname</span><span class="p">);</span>
</span><span class='line'><span class="nx">redis</span><span class="p">.</span><span class="nx">auth</span><span class="p">(</span><span class="nx">rtg</span><span class="p">.</span><span class="nx">auth</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Isi variabel <code>REDISTOGO_URL</code> diambil dari informasi di website RedisToGo seperti pada screenshot di atas.</p>

<p>Aplikasi bisa kita deploy ke Heroku dan harusnya bisa berjalan dengan sukses. Dengan suksesnya deployment tersebut, persiapan kita sudah selesai. Selanjutnya kita bisa mulai desain dan coding aplikasi kita yang sebenarnya.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Endy Muhardin</span></span>

      








  


<time datetime="2014-02-21T15:43:00+07:00" pubdate data-updated="true">Feb 21<span>st</span>, 2014</time>
      

<span class="categories">
  
    <a class='category' href='/categories/javascript/'>javascript</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://software.endy.muhardin.com/javascript/persiapan-coding-nodejs/" data-via="endymuhardin" data-counturl="http://software.endy.muhardin.com/javascript/persiapan-coding-nodejs/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/life/ongoing-learning/" title="Previous Post: Ongoing Learning">&laquo; Ongoing Learning</a>
      
      
        <a class="basic-alignment right" href="/javascript/javascript-development-stack/" title="Next Post: JavaScript Development Stack">JavaScript Development Stack &raquo;</a>
      
    </p>
  </footer>
</article>


<section>
  <h1>Comments</h1>
  <div id="facebook_comments" aria-live="polite">
    <noscript>Please enable JavaScript to view the comments powered by facebook</a></noscript>
<div
  class="fb-comments"
  data-href="http://software.endy.muhardin.com/javascript/persiapan-coding-nodejs/"
  data-num-posts="2"
  data-width="470"
  data-colorscheme="light" ></div>

  </div>
</section>



</div>

<aside class="sidebar">
  
    <section>
<h1>Endy Muhardin</h1>

<p>Software Developer berdomisili di Jabodetabek, berkutat di lingkungan open source, terutama Java dan Linux.</p>

<p>
    <ul>
        <li>
            <span class="icon-phone" style="text-align: left; width: 100%">&nbsp;
            +62 812 98000 468
            </span>
        </li>
        <li>
            <span class="icon-envelope" style="text-align: left; width: 100%">&nbsp;
                <a href="mailto:endy.muhardin@gmail.com">endy.muhardin@gmail.com</a>
            </span>
        </li>
        <li>
            <span class="icon-twitter" style="text-align: left; width: 100%">&nbsp;
                <a href="http://twitter.com/endymuhardin">@endymuhardin</a>
            </span>
        </li>
        <li>
            <span class="icon-github" style="text-align: left; width: 100%">&nbsp;
                <a href="https://github.com/endymuhardin">github.com/endymuhardin</a>
            </span>
        </li>
        <li>
            <span class="icon-facebook" style="text-align: left; width: 100%">&nbsp;
                <a href="http://facebook.com/endy.muhardin">facebook.com/endy.muhardin</a>
            </span>
        </li>
        <li>
            <span class="icon-google-plus" style="text-align: left; width: 100%">&nbsp;
                <a href="http://google.com/+EndyMuhardin">google.com/+EndyMuhardin</a>
            </span>
        </li>
        <li>
            <span class="icon-linkedin" style="text-align: left; width: 100%">&nbsp;
                <a href="http://id.linkedin.com/pub/endy-muhardin/3/940/1bb">LinkedIn</a>
            </span>
        </li>
    </ul>
</p>
</section>

<section>

Bila artikel di website ini membantu meningkatkan penghasilan Anda, 
jangan ragu untuk memberikan donasi :)

<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----MIIHRwYJKoZIhvcNAQcEoIIHODCCBzQCAQExggEwMIIBLAIBADCBlDCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20CAQAwDQYJKoZIhvcNAQEBBQAEgYByjmBHWB1u9oWkn33FHJ7Lu41iidZkdKLciblvSz2Oa/oBArw42F4/7nq3imMAWUvpA6Cx9zwNr3R7WqjnMlDr91VTkeyl1jusRB6Knw/JAaNI2yz20lbFtVNMhUrh2LJ6qXUwvdL4jvZeNUeOcvq/muETfy8BzgdKwCF3gNGpoTELMAkGBSsOAwIaBQAwgcQGCSqGSIb3DQEHATAUBggqhkiG9w0DBwQId7q7vUD8KwOAgaAyBdpVvmsdYWgKdVROwaJazFrOpQpWEncNGoycnyfeJRNwHXXZU1mj0oTJuvj/CUGr6cZC5RnQNBHC6FLnbjCVheTNtjBSs/CjD7HZMn28kElykLad2wDrFUsBkQCdRU43ZBLoRedRKbGVWP4wk6DgLovkwPzYNLKtl3clJbgm3UDXigmJqeAyvmafF2yk8LV4ACLTJtCu6qtSBVHkuUPToIIDhzCCA4MwggLsoAMCAQICAQAwDQYJKoZIhvcNAQEFBQAwgY4xCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJDQTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLUGF5UGFsIEluYy4xEzARBgNVBAsUCmxpdmVfY2VydHMxETAPBgNVBAMUCGxpdmVfYXBpMRwwGgYJKoZIhvcNAQkBFg1yZUBwYXlwYWwuY29tMB4XDTA0MDIxMzEwMTMxNVoXDTM1MDIxMzEwMTMxNVowgY4xCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJDQTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLUGF5UGFsIEluYy4xEzARBgNVBAsUCmxpdmVfY2VydHMxETAPBgNVBAMUCGxpdmVfYXBpMRwwGgYJKoZIhvcNAQkBFg1yZUBwYXlwYWwuY29tMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDBR07d/ETMS1ycjtkpkvjXZe9k+6CieLuLsPumsJ7QC1odNz3sJiCbs2wC0nLE0uLGaEtXynIgRqIddYCHx88pb5HTXv4SZeuv0Rqq4+axW9PLAAATU8w04qqjaSXgbGLP3NmohqM6bV9kZZwZLR/klDaQGo1u9uDb9lr4Yn+rBQIDAQABo4HuMIHrMB0GA1UdDgQWBBSWn3y7xm8XvVk/UtcKG+wQ1mSUazCBuwYDVR0jBIGzMIGwgBSWn3y7xm8XvVk/UtcKG+wQ1mSUa6GBlKSBkTCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb22CAQAwDAYDVR0TBAUwAwEB/zANBgkqhkiG9w0BAQUFAAOBgQCBXzpWmoBa5e9fo6ujionW1hUhPkOBakTr3YCDjbYfvJEiv/2P+IobhOGJr85+XHhN0v4gUkEDI8r2/rNk1m0GA8HKddvTjyGw/XqXa+LSTlDYkqI8OwR8GEYj4efEtcRpRYBxV8KxAW93YDWzFGvruKnnLbDAF6VR5w/cCMn5hzGCAZowggGWAgEBMIGUMIGOMQswCQYDVQQGEwJVUzELMAkGA1UECBMCQ0ExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC1BheVBhbCBJbmMuMRMwEQYDVQQLFApsaXZlX2NlcnRzMREwDwYDVQQDFAhsaXZlX2FwaTEcMBoGCSqGSIb3DQEJARYNcmVAcGF5cGFsLmNvbQIBADAJBgUrDgMCGgUAoF0wGAYJKoZIhvcNAQkDMQsGCSqGSIb3DQEHATAcBgkqhkiG9w0BCQUxDxcNMTMwNzExMDY0MjAwWjAjBgkqhkiG9w0BCQQxFgQUwzp1u86AW3VypUoSwjzfYA4KYn8wDQYJKoZIhvcNAQEBBQAEgYBExEV1zgHTrd+4zfXwIP0KO0/W7b4s2KDLbZ3Vq9FrtdtC9W3NEf6SbVZDYE+bEheP10XokfC8BslN7nZgsfPTvSNXv7ixfpWUVBb/gQB+QO70q1NZ2tuF2M/t1QzFUEZ9FeA0sgFMBS7nxmu7ynaSzez3B4FTG/jUzuRljVWhew==-----END PKCS7-----
">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
</form>

</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/java/scope-variabel/">Scope Variabel</a>
      </li>
    
      <li class="post">
        <a href="/java/mengapa-kita-membuat-class/">Mengapa kita membuat class</a>
      </li>
    
      <li class="post">
        <a href="/manajemen/pembagian-kerja-dalam-programming/">Pembagian Kerja dalam Programming</a>
      </li>
    
      <li class="post">
        <a href="/manajemen/waterfall-is-the-best/">Waterfall is The Best</a>
      </li>
    
      <li class="post">
        <a href="/java/tips-meletakkan-file-konfigurasi-aplikasi/">Tips Meletakkan File Konfigurasi Aplikasi</a>
      </li>
    
      <li class="post">
        <a href="/akademik/tanya-judul-skripsi/">Tanya Judul Skripsi</a>
      </li>
    
      <li class="post">
        <a href="/manajemen/belajar-project-management-dari-ubuntu/">Belajar Project Management dari Ubuntu</a>
      </li>
    
      <li class="post">
        <a href="/manajemen/capacity-planning/">Capacity Planning</a>
      </li>
    
      <li class="post">
        <a href="/java/memahami-authentication/">Memahami Authentication</a>
      </li>
    
      <li class="post">
        <a href="/java/desain-skema-database/">Desain Skema Database</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("endymuhardin", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/endymuhardin" class="twitter-follow-button" data-show-count="false">Follow @endymuhardin</a>
  
</section>


<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/endymuhardin">@endymuhardin</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'endymuhardin',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Endy Muhardin -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=269506799827290&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
