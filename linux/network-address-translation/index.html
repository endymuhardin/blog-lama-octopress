
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Network Address Translation - Living life and make it better</title>
  <meta name="author" content="Endy Muhardin">

  
  <meta name="description" content="NAT adalah singkatan dari Network Address Translation. Gunanya supaya kita bisa mempublish komputer di internal (misal, IP dalamnya : 192.168.0.1)
ke &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://software.endy.muhardin.com/linux/network-address-translation/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Living life and make it better" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>

<meta property="fb:app_id" content="269506799827290" />



  <link href="/stylesheets/data-table.css" media="screen, projection" rel="stylesheet" type="text/css" />
  <link href="/stylesheets/font-awesome.css" media="screen, projection" rel="stylesheet" type="text/css" />

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-36102948-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:software.endy.muhardin.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
    <li><a href="/">
        <span class="my_site_title">
            Living life and make it better
        </span>
       
           <span class="my_site_subtitle">
             life, learn, contribute
           </span>
       
    </a></li>
  <li><a href="/">Blog</a></li>
  <li><a href="/archives">Archives</a></li>
  <li><a href="/calendar">Calendar</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Network Address Translation</h1>
    
    
      <p class="meta">
        








  


<time datetime="2007-08-30T00:50:36+07:00" pubdate data-updated="true">Aug 30<span>th</span>, 2007</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>NAT adalah singkatan dari Network Address Translation.</p>

<p>Gunanya supaya kita bisa mempublish komputer di internal (misal, IP dalamnya : 192.168.0.1)
ke internet (misal, IP luarnya : 202.159.11.11).
Atau agar komputer di jaringan dalam bisa berbagi pakai akses internet.</p>

<p>Setiap request ke satu komputer, komputer asal mengirim paket data ke komputer tujuan.
Mirip dengan kalau kita kirim surat. Pesannya ditulis di kertas, masukkan amplop,
tulis alamat penerima dan alamat pengirim.</p>

<p>Contoh paketnya kira-kira seperti ini.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Dari  : 202.159.22.22
</span><span class='line'>Untuk : 202.159.11.11
</span><span class='line'>Pesan : halo</span></code></pre></td></tr></table></div></figure>


<p>Gateway harus punya mapping IP luar dan IP dalam.
Begitu gateway terima paket yang ditujukan ke IP luar,
dia akan membungkus paket tersebut dengan amplop baru, alamat tujuannya diganti dengan IP dalam.
Proses ini dinamakan DNAT (Destination NAT).</p>

<p>Bila alamat tujuan tidak diganti, maka routernya akan bingung, karena dia tidak tahu IP luar itu mesinnya yang mana.</p>

<p>Kalau di Linux, ini dilakukan dengan perintah iptables.
Contohnya adalah sebagai berikut:</p>

<p><code>iptables -t nat -I PREROUTING -d 202.159.11.11 --to-destination 192.168.0.1 -j DNAT</code></p>

<p>Setelah diDNAT, paketnya menjadi seperti ini:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Dari  : 202.159.22.22
</span><span class='line'>Untuk : 192.168.0.1
</span><span class='line'>Pesan : halo</span></code></pre></td></tr></table></div></figure>


<p>Setelah itu, amplop lewat proses routing. Router akan bisa menyampaikan paket tersebut,
karena dia kenal 192.168.0.1 itu mesin yang mana.</p>

<p>Akhirnya paket sampai di tujuan.</p>

<p>Dengan menggunakan DNAT ini, kita bisa mempublikasikan mesin di jaringan internal agar bisa diakses dari luar.</p>

<p>Bagaimana jika sebaliknya?</p>

<p>Penerima akan mengirim balasan. Dia masukkan ke amplop, kirim ke router.
Router akan lihat bahwa tujuannya adalah komputer di luar, maka dia kirim ke gateway.</p>

<p>Paketnya kira-kira seperti ini:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Dari  : 192.168.0.1
</span><span class='line'>Untuk : 202.159.22.22
</span><span class='line'>Pesan : halo juga</span></code></pre></td></tr></table></div></figure>


<p>Gateway melihat bahwa alamat pengirim adalah IP dalam.
Kalau diteruskan begitu saja, maka kalau ada balasan lagi, tidak akan sampai,
karena IP dalam tidak dikenal di luar.
Jadi dia harus membungkus lagi dengan amplop lagi, kali ini yang diganti adalah alamat pengirim.
IP dalam diganti dengan IP public.
Proses ini dinamakan SNAT (Source NAT)</p>

<p>Contohnya adalah sebagai berikut:
<code>iptables -t nat -I POSTROUTING -s 192.168.0.1 --to-source 202.159.11.11 -j SNAT</code></p>

<p>Setelah diSNAT paketnya menjadi seperti ini:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Dari  : 202.159.11.11
</span><span class='line'>Untuk : 202.159.22.22
</span><span class='line'>Pesan : halo juga</span></code></pre></td></tr></table></div></figure>


<p>Dengan menggunakan SNAT, kita bisa mengimplementasikan Internet Connection Sharing,
yaitu satu koneksi internet dibagi beramai-ramai.</p>

<p>Ada satu kasus khusus untuk SNAT, namanya Masquerade.
Ini digunakan apabila IP public yang digunakan berubah-ubah.
Misalnya kalau kita pakai dialup connection.</p>

<p>Kalau kita nekat pakai SNAT, nanti akan repot, karena harus update rule setiap dial ke internet.</p>

<p>Jadi, kita gunakan masquerade.
Berikut perintahnya:
<code>iptables -t nat -I POSTROUTING -p tcp -s 192.168.0.1 -j MASQUERADE</code></p>

<p>Perhatian: Jangan lupa untuk mengaktifkan IP Forwarding di gateway dengan cara :
<code>cat 1 &gt; /proc/sys/net/ipv4/ip_forward</code></p>

<p>Rangkaian perintah ini akan hilang pada saat reboot.
Jadi harus ada usaha tambahan agar konfigurasi ini jadi permanen.
Caranya, tergantung masing-masing distro.</p>

<p>Sayangnya saat ini iptables hanya ada di Linux, dan nampaknya tidak akan ada versi Windowsnya. Karena iptables sangat tightly-coupled dengan kernel linux.</p>

<p>Untuk Windows, kita dapat gunakan fitur Internet Connection Sharing apabila ada. Beberapa versi Windows (misalnya XP Home), tidak punya fitur ini. Jadi solusinya adalah dengan menggunakan aplikasi tambahan seperti misalnya <a href="http://www.wingate.com/product-wingate.php">WinGate</a> atau <a href="http://www.kerio.com/kwf_home.html">WinRoute</a>.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Endy Muhardin</span></span>

      








  


<time datetime="2007-08-30T00:50:36+07:00" pubdate data-updated="true">Aug 30<span>th</span>, 2007</time>
      

<span class="categories">
  
    <a class='category' href='/categories/linux/'>linux</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://software.endy.muhardin.com/linux/network-address-translation/" data-via="endymuhardin" data-counturl="http://software.endy.muhardin.com/linux/network-address-translation/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/aplikasi/konfigurasi-mod_jk/" title="Previous Post: Konfigurasi mod_jk">&laquo; Konfigurasi mod_jk</a>
      
      
        <a class="basic-alignment right" href="/java/menggunakan-hermesjms/" title="Next Post: Menggunakan HermesJMS">Menggunakan HermesJMS &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
<h1>Endy Muhardin</h1>

<p>Software Developer berdomisili di Jabodetabek, berkutat di lingkungan open source, terutama Java dan Linux.</p>

<p>
    <ul>
        <li>
            <span class="icon-phone" style="text-align: left; width: 100%">&nbsp;
            +62 812 98000 468
            </span>
        </li>
        <li>
            <span class="icon-envelope" style="text-align: left; width: 100%">&nbsp;
                <a href="mailto:endy.muhardin@gmail.com">endy.muhardin@gmail.com</a>
            </span>
        </li>
        <li>
            <span class="icon-twitter" style="text-align: left; width: 100%">&nbsp;
                <a href="http://twitter.com/endymuhardin">@endymuhardin</a>
            </span>
        </li>
        <li>
            <span class="icon-github" style="text-align: left; width: 100%">&nbsp;
                <a href="https://github.com/endymuhardin">github.com/endymuhardin</a>
            </span>
        </li>
        <li>
            <span class="icon-facebook" style="text-align: left; width: 100%">&nbsp;
                <a href="http://facebook.com/endy.muhardin">facebook.com/endy.muhardin</a>
            </span>
        </li>
        <li>
            <span class="icon-google-plus" style="text-align: left; width: 100%">&nbsp;
                <a href="https://plus.google.com/110971146012275775230">Google +</a>
            </span>
        </li>
        <li>
            <span class="icon-linkedin" style="text-align: left; width: 100%">&nbsp;
                <a href="http://id.linkedin.com/pub/endy-muhardin/3/940/1bb">LinkedIn</a>
            </span>
        </li>
    </ul>
</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/aplikasi/mematikan-location-service-di-facebook-android/">Mematikan Location Service di Facebook Android</a>
      </li>
    
      <li class="post">
        <a href="/java/memahami-dependency-injection/">Memahami Dependency Injection</a>
      </li>
    
      <li class="post">
        <a href="/java/membuat-changelog-liquibase/">Membuat Changelog Liquibase</a>
      </li>
    
      <li class="post">
        <a href="/java/membuat-audit-log/">Membuat Audit Log</a>
      </li>
    
      <li class="post">
        <a href="/aplikasi/buku-panduan-markdown-dan-pandoc/">Buku Panduan Markdown dan Pandoc</a>
      </li>
    
      <li class="post">
        <a href="/aplikasi/membuat-dokumen-dengan-markdown-dan-pandoc/">Membuat dokumen dengan Markdown dan Pandoc</a>
      </li>
    
      <li class="post">
        <a href="/manajemen/release-management/">Release Management</a>
      </li>
    
      <li class="post">
        <a href="/aplikasi/terima-kasih-wordpress/">Terima kasih Wordpress</a>
      </li>
    
      <li class="post">
        <a href="/java/konsep-dasar-log4/">Konsep Dasar Log4j</a>
      </li>
    
      <li class="post">
        <a href="/java/monitoring-aplikasi-java/">Monitoring Aplikasi Java</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("endymuhardin", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/endymuhardin" class="twitter-follow-button" data-show-count="false">Follow @endymuhardin</a>
  
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Endy Muhardin -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
