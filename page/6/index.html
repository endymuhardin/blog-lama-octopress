
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Living life and make it better</title>
  <meta name="author" content="Endy Muhardin">

  
  <meta name="description" content="Pada artikel ini, kita akan mengulas secara singkat perintah-perintah yang sering kita gunakan dalam Git. Tapi sebelum mulai, perlu kita pahami &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://software.endy.muhardin.com/page/6/">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Living life and make it better" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>

<meta property="fb:app_id" content="269506799827290" />



  <link href="/stylesheets/data-table.css" media="screen, projection" rel="stylesheet" type="text/css" />
  <link href="/stylesheets/font-awesome.css" media="screen, projection" rel="stylesheet" type="text/css" />

  

</head>

<body   >
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:software.endy.muhardin.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
    <li><a href="/">
        <span class="my_site_title">
            Living life and make it better
        </span>
       
           <span class="my_site_subtitle">
             life, learn, contribute
           </span>
       
    </a></li>
  <li><a href="/">Blog</a></li>
  <li><a href="/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/aplikasi/pemakaian-git-sehari-hari/">Pemakaian Git Sehari-hari</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2011-02-08T16:02:29+07:00" pubdate data-updated="true">Feb 8<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Pada artikel ini, kita akan mengulas secara singkat perintah-perintah yang sering kita gunakan dalam Git. Tapi sebelum mulai, perlu kita pahami beberapa istilah sebagai berikut:</p>

<ul>
<li><p>diff : perbedaan antara satu file dengan file lain
biasanya diff dilakukan terhadap satu file yang sudah berubah isinya</p></li>
<li><p>changeset : kumpulan diff</p></li>
<li><p>working folder : folder kerja kita, berisi file yang (mungkin) sudah berubah sejak commit terakhir</p></li>
<li><p>staging : tempat persiapan changeset yang akan dicommit</p></li>
<li><p>commit : snapshot dari posisi folder dan file pada waktu tertentu</p></li>
<li><p>tip : commit paling ujung</p></li>
<li><p>head : nama lain tip</p></li>
<li><p>branch : head yang diberi nama</p></li>
<li><p>HEAD : head yang sedang aktif</p></li>
<li><p>merge : menggabungkan lebih dari satu commit</p></li>
</ul>


<h2>Membuat Repository</h2>

<p>Untuk bisa mulai bekerja, kita harus memiliki repository dulu. Ada dua kemungkinan, kita membuat repository baru, atau kita membuat clone dari repository yang sudah ada.</p>

<table>
<thead>
<tr>
<th>Keterangan                  </th>
<th>Perintah</th>
</tr>
</thead>
<tbody>
<tr>
<td>membuat repository baru             </td>
<td>git init</td>
</tr>
<tr>
<td>membuat repository baru di folder project-baru  </td>
<td>git init project-baru</td>
</tr>
<tr>
<td>membuat repository untuk dishare        </td>
<td>git init &#8211;bare project-baru</td>
</tr>
<tr>
<td>copy repository lain                </td>
<td>git clone repo-url</td>
</tr>
</tbody>
</table>


<p>pilihan format URL</p>

<p>file:///path/ke/repo : clone dari folder lokal</p>

<p>/path/ke/repo : clone dari folder lokal, menggunakan hard link</p>

<p>http://server/path/ke/repo : clone melalui protokol http</p>

<p>username@server:path/ke/repo : clone melalui protokol ssh</p>

<h2>Bekerja dengan Git</h2>

<p>Berikut ini adalah perintah yang dilakukan selama sesi coding.</p>

<table>
<thead>
<tr>
<th>Keterangan                                                      </th>
<th>  Perintah</th>
</tr>
</thead>
<tbody>
<tr>
<td>Menambah file baru                                                  </td>
<td>  git add namafile</td>
</tr>
<tr>
<td>Menghapus file                                                      </td>
<td>  git rm namafile</td>
</tr>
<tr>
<td>Memasukkan perubahan di satu file ke staging area                                   </td>
<td>  git add namafile</td>
</tr>
<tr>
<td>memasukkan semua perubahan                                              </td>
<td>  git add . </td>
</tr>
<tr>
<td>memilih potongan kode yang akan dimasukkan                                      </td>
<td>  git add -p</td>
</tr>
<tr>
<td>memasukkan perubahan ke staging menggunakan menu                                    </td>
<td>  git add -i</td>
</tr>
<tr>
<td>melihat status perubahan file, mana yang masih di working dan mana yang sudah di staging                </td>
<td>  git status</td>
</tr>
<tr>
<td>mengeluarkan perubahan dari staging area                                        </td>
<td>  git reset &#8211; namafile</td>
</tr>
<tr>
<td>melihat perubahan yang belum dimasukkan ke staging area                                 </td>
<td>  git diff</td>
</tr>
<tr>
<td>melihat perubahan yang akan dicommit (sudah ada di staging area)                            </td>
<td>  git diff &#8211;staged</td>
</tr>
<tr>
<td>melihat perubahan antara working folder dan commit terakhir                             </td>
<td>  git diff HEAD</td>
</tr>
<tr>
<td>melihat file mana saja yang berubah                                         </td>
<td>  git diff &#8211;name-status abc123..def456</td>
</tr>
<tr>
<td>melakukan commit, editor akan diaktifkan untuk mengisi keterangan                           </td>
<td>  git commit</td>
</tr>
<tr>
<td>melakukan commit, langsung mengisi keterangan                                       </td>
<td>  git commit -m &#8220;langsung isi keterangan di sini&#8221;</td>
</tr>
<tr>
<td>commit langsung semua perubahan, tanpa melalui staging                                  </td>
<td>  git commit -a</td>
</tr>
<tr>
<td>melihat commit history                                                  </td>
<td>  git log</td>
</tr>
<tr>
<td>log lima commit terakhir                                                </td>
<td>  git log -5</td>
</tr>
<tr>
<td>log hanya menampilkan summary                                               </td>
<td>  git log &#8211;oneline</td>
</tr>
<tr>
<td>tampilkan commit summary dari semua branch dengan graph hubungan antar commit                       </td>
<td>  git log &#8211;oneline &#8211;all &#8211;graph</td>
</tr>
<tr>
<td>membuat commit baru yang berkebalikan dengan (undo) commit terakhir                         </td>
<td>  git revert HEAD</td>
</tr>
<tr>
<td>undo 2 commit terakhir                                                  </td>
<td>  git revert HEAD~2</td>
</tr>
</tbody>
</table>


<p>memindahkan HEAD ke commit-id yang diminta, staging disamakan dengan HEAD, working tetap seperti semula. <br/>
Ini adalah opsi defaultnya reset                                            |  git reset &#8211;mixed
memindahkan HEAD ke commit-id yang diminta, isi working dan staging disamakan dengan commit-id tersebut         |  git reset &#8211;hard commit-id
memindahkan HEAD ke commit-id yang diminta, staging dan working tidak disentuh. Tidak mengubah output git status    |  git reset &#8211;soft
membuat working dan staging sama dengan HEAD                                        |  git reset &#8211;hard</p>

<h2>Bekerja paralel menggunakan branch</h2>

<p>Branch memungkinkan kita bekerja secara paralel, misalnya ada tim yang menambah fitur, dan ada tim yang melakukan bug fix.</p>

<table>
<thead>
<tr>
<th>Keterangan                          </th>
<th> Perintah</th>
</tr>
</thead>
<tbody>
<tr>
<td>membuat branch baru                     </td>
<td> git branch namabranch</td>
</tr>
<tr>
<td>pindah ke branch tersebut                   </td>
<td> git checkout namabranch</td>
</tr>
<tr>
<td>bikin branch sambil pindah                  </td>
<td> git checkout -b namabranch</td>
</tr>
<tr>
<td>membuat tracking branch untuk branch bugfix di origin       </td>
<td> git checkout &#8211;track origin/bugfix</td>
</tr>
<tr>
<td>membuat tracking branch dengan nama berbeda dengan remote   </td>
<td> git checkout -b myfix origin/bugfix</td>
</tr>
<tr>
<td>membandingkan branch satu dengan lainnya            </td>
<td> git diff master..fitur-xx</td>
</tr>
<tr>
<td>membandingkan branch dengan titik awal branch tersebut      </td>
<td> git diff master&#8230;fitur-xx</td>
</tr>
<tr>
<td>menggabungkan branch satu dengan lainnya            </td>
<td> git checkout branch-tujuan   </td>
</tr>
<tr>
<td>                                </td>
<td> git merge branch-yang-mau-diambil             </td>
</tr>
<tr>
<td>Mengedit konflik :                      </td>
<td>   </td>
</tr>
<tr>
<td>- edit konfliknya                       </td>
<td> git add namafile-yang-konflik  </td>
</tr>
<tr>
<td>- remove markernya                          </td>
<td> git commit -m &#8220;merge fitur-xxx ke master&#8221;</td>
</tr>
<tr>
<td>membatalkan merge yang konflik                  </td>
<td> git reset &#8211;hard</td>
</tr>
</tbody>
</table>


<h2>Bekerja dengan remote</h2>

<p>Interaksi dengan remote repository</p>

<table>
<thead>
<tr>
<th>Keterangan                                          </th>
<th> Perintah</th>
</tr>
</thead>
<tbody>
<tr>
<td>mendaftarkan remote repository                                  </td>
<td> git remote add namaremote url</td>
</tr>
<tr>
<td>melihat daftar remote repository                                </td>
<td> git remote -v</td>
</tr>
<tr>
<td>menghapus remote repository                                 </td>
<td> git remote rm namaremote</td>
</tr>
<tr>
<td>mengambil perubahan di remote                                   </td>
<td> git remote update</td>
</tr>
<tr>
<td>mengambil perubahan di satu remote saja                             </td>
<td> git remote update namaremote</td>
</tr>
<tr>
<td>mengambil perubahan di remote, hapus branch di lokal yang sudah tidak ada di remote     </td>
<td> git remote update &#8211;prune</td>
</tr>
<tr>
<td>mengambil perubahan sesuai refspec yang sudah dikonfigurasi                 </td>
<td> git fetch namaremote</td>
</tr>
<tr>
<td>mengambil perubahan kemudian dimerge ke branch lokal yang sesuai                </td>
<td> pull = fetch + merge</td>
</tr>
<tr>
<td>                                                </td>
<td> git pull namaremote</td>
</tr>
<tr>
<td>mengirim perubahan di lokal ke remote                               </td>
<td> git push nama-remote nama-branch-lokal:nama-branch-remote</td>
</tr>
<tr>
<td>mengirim perubahan di lokal ke remote, semua branch yang namanya bersesuaian akan dikirim   </td>
<td> git push nama-remote</td>
</tr>
<tr>
<td>mengirim perubahan di branch lokal yang sedang aktif ke branch di remote dengan nama yang sama  </td>
<td> git push nama-remote HEAD</td>
</tr>
<tr>
<td>menghapus branch di remote                                  </td>
<td> git push nama-remote :nama-branch-remote</td>
</tr>
</tbody>
</table>


<p>Demikianlah perintah-perintah Git yang kita gunakan sehari-hari. Melengkapi daftar perintah di atas, diagram berikut dapat membantu pemahaman kita tentang konsep dan operasi di Git.</p>

<p><img src="/images/uploads/2011/01/git-300x284.png" title="" ></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/java/project-setup-dengan-gradle/">Project Setup Dengan Gradle</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2011-02-01T20:21:35+07:00" pubdate data-updated="true">Feb 1<span>st</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Project Setup dengan menggunakan Gradle dan Git</p>

<p>Hal pertama yang kita lakukan sebelum mulai bekerja tentunya adalah menyiapkan meja kerja dan peralatannya. Sama juga dengan mulai membuat aplikasi. Kita harus menyiapkan struktur folder, library dan framework, dan mengatur semuanya agar siap dikerjakan di meja kita, dalam hal ini IDE.</p>

<p>Di ArtiVisi, biasanya ini dikerjakan oleh programmer senior, yaitu <a href="http://martinusadyh.web.id/">Martinus</a> atau saya sendiri. Kegiatan project setup ini tidak terlalu tinggi frekuensinya, karena biasanya coding project yang existing jauh lebih sering daripada memulai project baru.</p>

<p>Yang jarang dikerjakan biasanya cepat dilupakan. Inilah alasan utama saya menulis posting kali ini, sebagai pengingat buat diri sendiri. Selain itu, mudah-mudahan ada manfaatnya juga untuk para pembaca sekalian.</p>

<p>Sebagai gambaran, tipikal aplikasi di ArtiVisi menggunakan <a href="http://endy.artivisi.com/blog/java/development-stack-2011/">stack standar 2011</a>. Jadi, project setup ini akan dibuat mengikuti stack standar tersebut.</p>

<p>Pertama kali, kita buat dulu projectnya. Satu aplikasi biasanya kita pecah menjadi beberapa komponen, yaitu :</p>

<ul>
<li><p>Domain Model dan Service API : ini kita pisahkan untuk memudahkan distribusi ke aplikasi client. Perhatikan bahwa yang saya maksud client di sini bukanlah customer pembeli aplikasi, melainkan aplikasi di sisi hilir misalnya user interface yang dibuat dengan Swing. Di sisi client, tidak perlu ada detail implementasi. Cukup class-class domain seperti Produk, Kategori, dsb. Juga kita sediakan service interface, yaitu method yang bisa digunakan untuk menjalankan proses bisnis.</p></li>
<li><p>Implementasi Service : ini adalah implementasi dari service interface di atas. Implementasi biasanya hanya ada di sisi server. Jadi, jar yang dihasilkan project ini tidak kita distribusikan ke client</p></li>
<li><p>Konfigurasi : file konfigurasi seperti jdbc.properties, logback-test.xml, smtp.properties, dan setting-setting lain kita juga pisahkan ke project sendiri. Ini tujuannya untuk memudahkan deployment. Seperti kita tahu, biasanya ada beberapa environment seperti development di laptop programmer, testing server, dan production server. Dengan memisahkan konfigurasi, kita bisa menghindari mendeploy konfigurasi development ke server production. Yang perlu diperhatikan di sini, hibernate.cfg.xml dan applicationContext.xml bukanlah file konfigurasi. Itu adalah file aplikasi, walaupun bentuknya xml dan tidak perlu dikompilasi.</p></li>
<li><p>User Interface : kalau aplikasi desktop, ini hanya satu project saja. Atau mungkin dua dengan konfigurasinya. Tapi untuk web, biasanya kita pecah dua juga. Yang satu berisi source code java, satu lagi berisi aplikasi web. Dengan demikian, bila ada perubahan di controller, kita cukup deploy 1 jar, tidak perlu upload 1 war.</p></li>
</ul>


<p>Sebagai ketentuan lain, biasanya nama package selalu kita awali dengan com.artivisi, dan struktur folder mengikuti standar Maven.</p>

<p>Mari kita mulai, berikut rangkaian perintah di linux untuk membuat struktur awal project.</p>

<div><script src='https://gist.github.com/794650.js?file=folder-structure.sh'></script>
<noscript><pre><code>mkdir -p project-contoh/com.artivisi.contoh.{config,domain,service.impl,ui.springmvc,ui.web}/src/{main,test}/{java,resources}
mkdir -p project-contoh/com.artivisi.contoh.ui.web/src/main/webapp/WEB-INF</code></pre></noscript></div>


<p>Outputnya bisa kita lihat sebagai berikut</p>

<pre><code>find . 
.
./com.artivisi.contoh.service.impl
./com.artivisi.contoh.service.impl/src
./com.artivisi.contoh.service.impl/src/test
./com.artivisi.contoh.service.impl/src/test/java
./com.artivisi.contoh.service.impl/src/test/resources
./com.artivisi.contoh.service.impl/src/main
./com.artivisi.contoh.service.impl/src/main/java
./com.artivisi.contoh.service.impl/src/main/resources
./com.artivisi.contoh.domain
./com.artivisi.contoh.domain/src
./com.artivisi.contoh.domain/src/test
./com.artivisi.contoh.domain/src/test/java
./com.artivisi.contoh.domain/src/test/resources
./com.artivisi.contoh.domain/src/main
./com.artivisi.contoh.domain/src/main/java
./com.artivisi.contoh.domain/src/main/resources
./com.artivisi.contoh.ui.springmvc
./com.artivisi.contoh.ui.springmvc/src
./com.artivisi.contoh.ui.springmvc/src/test
./com.artivisi.contoh.ui.springmvc/src/test/java
./com.artivisi.contoh.ui.springmvc/src/test/resources
./com.artivisi.contoh.ui.springmvc/src/main
./com.artivisi.contoh.ui.springmvc/src/main/java
./com.artivisi.contoh.ui.springmvc/src/main/resources
./com.artivisi.contoh.config
./com.artivisi.contoh.config/src
./com.artivisi.contoh.config/src/test
./com.artivisi.contoh.config/src/test/java
./com.artivisi.contoh.config/src/test/resources
./com.artivisi.contoh.config/src/main
./com.artivisi.contoh.config/src/main/java
./com.artivisi.contoh.config/src/main/resources
./com.artivisi.contoh.ui.web
./com.artivisi.contoh.ui.web/src
./com.artivisi.contoh.ui.web/src/test
./com.artivisi.contoh.ui.web/src/test/java
./com.artivisi.contoh.ui.web/src/test/resources
./com.artivisi.contoh.ui.web/src/main
./com.artivisi.contoh.ui.web/src/main/java
./com.artivisi.contoh.ui.web/src/main/webapp/WEB-INF
./com.artivisi.contoh.ui.web/src/main/resources
</code></pre>

<p>Berikutnya, kita lengkapi dengan dependensi jar. Di ArtiVisi, kita menggunakan Gradle.
Gradle meminta kita untuk mendaftarkan project yang terlibat dalam settings.gradle</p>

<div><script src='https://gist.github.com/794650.js?file=settings.gradle'></script>
<noscript><pre><code>include &quot;com.artivisi.contoh.config&quot;
include &quot;com.artivisi.contoh.domain&quot;
include &quot;com.artivisi.contoh.service.impl&quot;
include &quot;com.artivisi.contoh.ui.springmvc&quot;
include &quot;com.artivisi.contoh.ui.web&quot;</code></pre></noscript></div>


<p>Dan ini build file Gradle.</p>

<div><script src='https://gist.github.com/794650.js?file=build.gradle'></script>
<noscript><pre><code>springVersion = &quot;3.0.5.RELEASE&quot;
springSecurityVersion = &quot;3.0.5.RELEASE&quot;
slf4jVersion = &quot;1.6.1&quot;
logbackVersion = &quot;0.9.27&quot;
jodaTimeVersion = &quot;1.6.2&quot;
sourceCompatibility = 1.6
 
subprojects {
    apply plugin: 'java'
    apply plugin: 'eclipse'
 
    configurations {
        all*.exclude group: &quot;commons-logging&quot;, module: &quot;commons-logging&quot;
    }
 
    repositories {
        mavenCentral()
    }
 
    dependencies {
        compile &quot;org.slf4j:jcl-over-slf4j:$slf4jVersion&quot;,
                &quot;org.slf4j:jul-to-slf4j:$slf4jVersion&quot;
                
        runtime &quot;joda-time:joda-time:$jodaTimeVersion&quot;        
                
        runtime &quot;ch.qos.logback:logback-classic:$logbackVersion&quot;
  
        testCompile 'junit:junit:4.7'
    }
 
    group = 'com.artivisi.contoh'
    version = '1.0-SNAPSHOT'
    sourceCompatibility = 1.6
    
    task wrapper(type: Wrapper) {
        gradleVersion = '0.9.1'
        jarFile = 'wrapper/wrapper.jar'
    }
}

project('com.artivisi.contoh.domain') {
    dependencies { 
        compile &quot;org.hibernate:hibernate-entitymanager:3.4.0.GA&quot;
     
        compile &quot;org.springframework:spring-tx:$springVersion&quot;,
                &quot;org.springframework:spring-orm:$springVersion&quot;,
                &quot;org.springframework:spring-jdbc:$springVersion&quot;
                
     
    }
}

project('com.artivisi.contoh.service.impl') {
    dependencies { 
        compile project(':com.artivisi.contoh.domain')
        compile &quot;org.hibernate:hibernate-entitymanager:3.4.0.GA&quot;
     
        compile &quot;org.springframework:spring-tx:$springVersion&quot;,
                &quot;org.springframework:spring-orm:$springVersion&quot;,
                &quot;org.springframework:spring-jdbc:$springVersion&quot;
                
     
    }
}

project('com.artivisi.contoh.ui.springmvc') {
    dependencies {
        compile project(':com.artivisi.contoh.service.impl')
     
        compile &quot;org.springframework:spring-webmvc:$springVersion&quot;,
                &quot;org.springframework:spring-aop:$springVersion&quot;
     
        compile &quot;org.springframework.security:spring-security-web:$springSecurityVersion&quot;,
                &quot;org.springframework.security:spring-security-config:$springSecurityVersion&quot;
     
        compile &quot;javax.validation:validation-api:1.0.0.GA&quot;,
                &quot;org.hibernate:hibernate-validator:4.0.2.GA&quot;
     
    }
}

project('com.artivisi.contoh.ui.web') {
    apply plugin: 'war'
    apply plugin: 'jetty'
     
    dependencies {
        compile project(':com.artivisi.contoh.ui.springmvc')
        runtime project(':com.artivisi.contoh.config')
      
        runtime &quot;javax.servlet:jstl:1.1.2&quot;,
                &quot;taglibs:standard:1.1.2&quot;,
                &quot;opensymphony:sitemesh:2.4.2&quot;
     
        providedCompile &quot;javax.servlet:servlet-api:2.5&quot;
    }
}</code></pre></noscript></div>


<p>Build file ini sudah mendeskripsikan semua sub-projectnya. Sebetulnya kita bisa membuat buildfile di masing-masing project, tapi saya lebih suka terpusat seperti ini supaya terlihat keterkaitan antar project.</p>

<p>Karena saya menggunakan Eclipse, saya menambahkan metadata supaya projectnya bisa dibuka di Eclipse. Ini bisa kita lakukan dengan cara menjalankan perintah</p>

<pre><code>gradle eclipse
</code></pre>

<p>dalam masing-masing folder project. Tapi karena terlalu malas, saya gunakan satu baris perintah ini.</p>

<div><script src='https://gist.github.com/794650.js?file=export-eclipse.sh'></script>
<noscript><pre><code>for d in */; do cd &quot;$d&quot;; gradle eclipse; cd ..; done</code></pre></noscript></div>


<p>Untung saja pakai linux, jadi bisa coding di command prompt :D</p>

<p>Selanjutnya, kita bisa test dengan melakukan build di project paling hilir, yaitu ui.web</p>

<pre><code>cd com.artivisi.contoh.ui.web
gradle war
</code></pre>

<p>Hasilnya ada di folder build/libs
Kita cek apakah semua dependensi sudah terpenuhi dengan perintah berikut.</p>

<pre><code>jar tvf build/libs/com.artivisi.contoh.ui.web-1.0-SNAPSHOT.war
</code></pre>

<p>Ini juga bisa langsung dijalankan dengan plugin Jetty yang ada dalam Gradle.</p>

<pre><code>cd com.artivisi.contoh.ui.web
gradle jetty
</code></pre>

<p>Outputnya bisa kita lihat di browser, dengan port 8080.
<img src="/images/uploads/2011/01/jetty-run-300x216.png" title="" ></p>

<p>Di situ ada link menuju aplikasi kita. Silahkan diklik.
<img src="/images/uploads/2011/01/klik-context-path-300x214.png" title="" ></p>

<p>Folder WEB-INF masih terlihat, karena kita belum membuat web.xml. Berikut isi web.xml, masukkan dalam folder com.artivisi.contoh.ui.web/src/main/webapp/WEB-INF</p>

<div><script src='https://gist.github.com/794650.js?file=web.xml'></script>
<noscript><pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;web-app version=&quot;2.5&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;&gt;

    &lt;!-- Reads request input using UTF-8 encoding --&gt;
    &lt;filter&gt;
        &lt;filter-name&gt;characterEncodingFilter&lt;/filter-name&gt;
        &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;encoding&lt;/param-name&gt;
            &lt;param-value&gt;UTF-8&lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;forceEncoding&lt;/param-name&gt;
            &lt;param-value&gt;true&lt;/param-value&gt;
        &lt;/init-param&gt;
    &lt;/filter&gt;

    &lt;filter-mapping&gt;
        &lt;filter-name&gt;characterEncodingFilter&lt;/filter-name&gt;
        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
    &lt;/filter-mapping&gt;
    
    &lt;!-- Handles all requests into the application --&gt;
    &lt;servlet&gt;
        &lt;servlet-name&gt;Spring MVC Dispatcher Servlet&lt;/servlet-name&gt;
        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
            &lt;param-value&gt;
                /WEB-INF/springmvc-context.xml
            &lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
    &lt;/servlet&gt;

    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;Spring MVC Dispatcher Servlet&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;

&lt;/web-app&gt;</code></pre></noscript></div>


<p>Sekalian saja kita konfigurasi Spring MVC. Pasang file springmvc-context.xml ini di sebelahnya web.xml</p>

<div><script src='https://gist.github.com/794650.js?file=springmvc-context.xml'></script>
<noscript><pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
    xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;
    xsi:schemaLocation=&quot;http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd&quot;&gt;

    &lt;!-- Scans the classpath of this application for @Components to deploy as beans --&gt;
    &lt;context:component-scan base-package=&quot;com.artivisi.contoh.ui.web&quot; /&gt;

    &lt;!-- Configures the @Controller programming model --&gt;
    &lt;mvc:annotation-driven /&gt;
    
    &lt;!-- mengganti default servletnya Tomcat dan Jetty --&gt;
    &lt;!-- ini diperlukan kalau kita mapping DispatcherServlet ke / --&gt;
    &lt;!-- sehingga tetap bisa mengakses folder selain WEB-INF, misalnya img, css, js --&gt;
    &lt;mvc:default-servlet-handler/&gt;

    &lt;!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources/ directory --&gt;
    &lt;mvc:resources mapping=&quot;/resources/**&quot; location=&quot;/resources/&quot; /&gt;

    &lt;!-- Application Message Bundle --&gt;
    &lt;bean id=&quot;messageSource&quot; class=&quot;org.springframework.context.support.ReloadableResourceBundleMessageSource&quot;&gt;
        &lt;property name=&quot;basename&quot; value=&quot;/WEB-INF/messages/messages&quot; /&gt;
        &lt;property name=&quot;cacheSeconds&quot; value=&quot;0&quot; /&gt;
    &lt;/bean&gt;

    &lt;!-- Resolves view names to protected .jsp resources within the /WEB-INF/views directory --&gt;
    &lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;
        &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/templates/jsp/&quot;/&gt;
        &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;/&gt;
    &lt;/bean&gt;
    
    &lt;!-- Forwards requests to the &quot;/&quot; resource to the &quot;hello&quot; view --&gt;
    &lt;mvc:view-controller path=&quot;/&quot; view-name=&quot;hello&quot;/&gt;

&lt;/beans&gt;
</code></pre></noscript></div>


<p>Kita cek juga apakah projectnya sudah bisa dibuka di Eclipse. Mari kita import.</p>

<p>Pertama, arahkan workspace ke folder project-contoh.
<img src="/images/uploads/2011/01/01-pilih-workspace-300x154.png" title="" ></p>

<p>Setelah Eclipse terbuka, kita pilih menu Import Project, untuk membuka 4 project yang tadi sudah kita buat.
<img src="/images/uploads/2011/01/02-import-existing-300x272.png" title="" ></p>

<p>Pilih folder induknya.
<img src="/images/uploads/2011/01/03-select-root-directory-272x300.png" title="" ></p>

<p>Selesai, semua project kita bisa dibuka. Bahkan kita bisa menjalankan project ui.web dengan cara klik kanan Run in Server. Ini bisa dilihat dari icon project tersebut yang berbentuk bola dunia.</p>

<p><img src="/images/uploads/2011/01/04-import-result-300x139.png" title="" ></p>

<p>Selesai sudah, mari kita <a href="http://endy.artivisi.com/blog/aplikasi/sharing-repository-git/">share dengan rekan yang lain</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <!-- Now we're back to normal posts. Note the links used under href in both headers.-->
        <h1 class="entry-title"><a href="/aplikasi/konsep-clustering/">Konsep Clustering</a></h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2011-01-30T04:15:14+07:00" pubdate data-updated="true">Jan 30<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Di milis JUG, lagi-lagi ada yang tanya tentang load balancing, failover, dan clustering. Jawabannya masih sama sejak 10 tahun saya berkecimpung di urusan coding-mengcoding. Jadi, baiklah saya tulis di blog saja, supaya next time bisa jadi referensi.</p>

<p>Demikian pertanyaannya.</p>

<blockquote></blockquote>

<p>Ini sebetulnya dua hal yang berbeda.
Load balancing ya membagi beban.
Failover ya mencegah single point of failure.</p>

<p>Load balancer terdiri dari satu balancer dan banyak worker.
Bebannya dibagi2 ke semua worker dengan algoritma yang biasanya bisa dipilih.
Bisa merata (round robin) bisa juga dengan bobot (weighted), misalnya worker X mendapat 2 kali worker Y karena dia specnya lebih tinggi.
Atau bisa juga dynamic, artinya si LB akan mengetes kondisi semua worker, mana yang kira2 sedang idle itu yang dikasi.
Mana yang sedang idle ini nanti ada lagi settingnya, apakah melihat CPU usage pakai SNMP, melihat ping response time, whatever.</p>

<p>Failover minimal harus ada 2 titik.
Kalo kita implement LB aja, point of failure (POF) nya adalah si LB.
Begitu LB nya mati, ya udah semua worker gak bisa diakses.
Untuk mencegah ini, LB nya harus ada 2, satu aktif satu standby (pasif).</p>

<p>Contoh aplikasi load balancer :</p>

<blockquote><ul>
<li><p>HAProxy</p></li>
<li><p>ldirectord (Ultra Monkey)</p></li>
<li><p>Pound</p></li>
</ul>
</blockquote>

<p>Contoh aplikasi lain yang bisa jadi load balancer :</p>

<blockquote><ul>
<li><p>Apache (mod_proxy_balancer)</p></li>
<li><p>Nginx</p></li>
<li><p>lighttpd</p></li>
<li><p>bind (DNS Server)</p></li>
</ul>
</blockquote>

<p>Contoh aplikasi failover :</p>

<blockquote><ul>
<li><p>heartbeat (Ultra Monkey)</p></li>
<li><p>keepalived</p></li>
</ul>
</blockquote>

<p>Nah, mudah2an sampe di sini jelas bahwa load balancing dan failover itu dua hal yang tidak saling terkait (orthogonal) dan biasanya dikombinasikan untuk mendapatkan konfigurasi yang robust dan performant.</p>

<blockquote><blockquote><p>Setahu saya konsep2x Clustering diatas berlaku pada saat hit pertama.
Pertanyaan saya.. Bagaimana jika request sudah terlayani tetapi ditengah-tengah proses server tiba2x down.. Apakah proses tersebut langsung di alihkan ke server yang lagi up? Jika iya apakah proses akan di restart dari awal atau server yang sedang up bisa melanjutkan sisa dari proses yang belum dikerjakan di server yang telah down?</p></blockquote></blockquote>

<p>Tidak selalu, tergantung konfigurasinya.
Ada konfigurasi sticky session.
Artinya, pada hit pertama, si user akan diberikan penanda, biasanya berbentuk cookie.
Pada hit berikutnya, LB akan melihat cookienya, dan mengarahkan ke server yang sebelumnya sudah mengurus si user ini.</p>

<p>Ada juga konfigurasi non-sticky.
Artinya tiap hit dianggap hit baru, dan didistribusikan ke semua server sesuai algoritma yang dipilih, round robin, weighted, atau dynamic, sesuai penjelasan di atas.</p>

<p>Mau pilih yang mana? Ya tergantung kemampuan LB nya.
Ada yang bisa 2-2 nya sehingga bisa pilih, dan ada juga yang rada stupid sehingga terpaksa pakai non-sticky.
Istilahnya, LBnya layer berapa? Kalo layer 7 biasanya bisa sticky, kalo layer 4 ya gak bisa.
Lebih jauh tentang urusan layer-layeran ini bisa dibaca <a href="http://blog.loadbalancer.org/why-layer-7-sucks/">di sini</a> dan <a href="http://1wt.eu/articles/2006_lb/">di sini</a></p>

<p>Nah, apa impact sticky vs non-sticky?
Ini pengaruhnya ke session data.
Session data adalah data sementara masing-masing user.
Karena sifatnya sementara, maka biasanya tidak disimpan secara persistent di tabel database.
Contoh paling klasik adalah isi shopping cart.
Itu barang belum diorder, tapi sudah dipilih, sehingga biasanya belum disimpan di database.</p>

<p>Kalo pake non-sticky, si user pertama milih barang di server X.
Pada saat dia pilih barang kedua, dilayani server Y.
Karena pilihan pertama ada di server X, ya pas dia pilih barang kedua, cuma tercatat 1 barang padahal harusnya 2.</p>

<p>Ini tidak terjadi kalo kita pakai sticky balancer.
Request kedua dan seterusnya akan diarahkan ke server X lagi.</p>

<p>Jadi, sticky atau non-sticky itu impactnya ke temporary data user, sering disebut dengan istilah session data atau user state.</p>

<p>Nah, setelah jelas apa dampaknya sticky vs non-sticky, mari kita lanjut ke pertanyaan selanjutnya.</p>

<blockquote><blockquote><p>Kalau untuk Java EE Application Server apakah untuk pertanyaan saya di atas sudah ada featurenya atau perlu ada tambahan produk lagi untuk bisa sharing informasi terhadap state suatu proses yang dijalankan di satu server sehingga jika server tersebut down proses bisa dilanjutkan di server yang lain tanpa merestart proses?</p></blockquote></blockquote>

<p>Mengenai urusan session/state management, ini sangat tergantung merek application server yang digunakan.
Secara umum, settingan standar appserver biasanya simpan data session di memori.
Kalau kita enable cluster, misalnya terdiri dari 4 worker, maka data session ini biasanya akan direplikasi ke satu worker lain.
Pada saat worker utama mati, request berikutnya akan diarahkan ke worker cadangannya, sehingga user gak kehilangan data belanjaan.
Biasanya, satu state itu disimpan ke 2 worker saja, bukan direplikasi ke semua untuk alasan efisiensi bandwidth.</p>

<p>Pada penjelasan di atas banyak sekali saya gunakan kata &#8216;biasanya&#8217;. Ini karena kapabilitas dan konfigurasi masing-masing merek appserver sangat berbeda sehingga sulit untuk menggeneralisir kondisinya.</p>

<p>Lalu bagaimana?
Saya biasanya mengambil pendekatan yang universal, yang jalan di semua appserver, sehingga tidak perlu pusing menghafal appserver apa bisa apa settingnya gimana.
Teknik universalnya sederhana: aplikasi webnya dibuat stateless.
Jangan ada simpan data di memori. Simpan semua di database, atau di distributed cache (misalnya memcached).</p>

<p>Di Java, data yang ada di memori antara lain : session variable, static variable, context variable.
Di PHP, CMIIW cuma session dan global variable aja.</p>

<p>Karena selama ini saya menggunakan teknik ini, jadi saya kurang up to date terhadap appserver apa bisa apa settingnya gimana.
Demikian juga tentang load balancer apa support sticky atau tidak, saya tidak pernah memikirkannya.
Pokoknya simpan state di distributed cache atau database, setelah itu mau pakai appserver Tomcat, Jetty, Glassfish, Weblogic, terserah.
Mau pakai load balancer Apache HTTPD, Nginx, lighty, HAProxy, Pound, Ultramonkey, juga terserah.</p>

<p>Demikian sekilas sharing mengenai load balancing dan clustering. Semoga menjadi cerah.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/page/7/">&larr; Older</a>
    
    <a href="/archives">Blog Archives</a>
    
    <a class="next" href="/page/5/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
<h1>Endy Muhardin</h1>

<p>Software Developer berdomisili di Jabodetabek, berkutat di lingkungan open source, terutama Java dan Linux.</p>

<p>
    <ul>
        <li>
            <span class="icon-phone" style="text-align: left; width: 100%">&nbsp;
            +62 812 98000 468
            </span>
        </li>
        <li>
            <span class="icon-envelope" style="text-align: left; width: 100%">&nbsp;
                <a href="mailto:endy.muhardin@gmail.com">endy.muhardin@gmail.com</a>
            </span>
        </li>
        <li>
            <span class="icon-twitter" style="text-align: left; width: 100%">&nbsp;
                <a href="http://twitter.com/endymuhardin">@endymuhardin</a>
            </span>
        </li>
        <li>
            <span class="icon-github" style="text-align: left; width: 100%">&nbsp;
                <a href="https://github.com/endymuhardin">github.com/endymuhardin</a>
            </span>
        </li>
        <li>
            <span class="icon-facebook" style="text-align: left; width: 100%">&nbsp;
                <a href="http://facebook.com/endy.muhardin">facebook.com/endy.muhardin</a>
            </span>
        </li>
        <li>
            <span class="icon-google-plus" style="text-align: left; width: 100%">&nbsp;
                <a href="https://plus.google.com/110971146012275775230">Google +</a>
            </span>
        </li>
        <li>
            <span class="icon-linkedin" style="text-align: left; width: 100%">&nbsp;
                <a href="http://id.linkedin.com/pub/endy-muhardin/3/940/1bb">LinkedIn</a>
            </span>
        </li>
    </ul>
</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/aplikasi/membuat-dokumen-dengan-markdown-dan-pandoc/">Membuat dokumen dengan Markdown dan Pandoc</a>
      </li>
    
      <li class="post">
        <a href="/manajemen/release-management/">Release Management</a>
      </li>
    
      <li class="post">
        <a href="/aplikasi/terima-kasih-wordpress/">Terima kasih Wordpress</a>
      </li>
    
      <li class="post">
        <a href="/java/konsep-dasar-log4/">Konsep Dasar Log4j</a>
      </li>
    
      <li class="post">
        <a href="/java/monitoring-aplikasi-java/">Monitoring Aplikasi Java</a>
      </li>
    
      <li class="post">
        <a href="/linux/backup-home-folder/">Backup Home Folder</a>
      </li>
    
      <li class="post">
        <a href="/java/staged-deployment/">Staged Deployment</a>
      </li>
    
      <li class="post">
        <a href="/manajemen/meluruskan-mitos-cmmi/">Meluruskan Mitos CMMI</a>
      </li>
    
      <li class="post">
        <a href="/aplikasi/redmine-jruby-tomca/">Instalasi Redmine di Tomcat</a>
      </li>
    
      <li class="post">
        <a href="/aplikasi/instalasi-spket-ide/">Instalasi Spket IDE</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("endymuhardin", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/endymuhardin" class="twitter-follow-button" data-show-count="false">Follow @endymuhardin</a>
  
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Endy Muhardin -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=269506799827290&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
